# BUG-069: ArchitectCoordinator spawns architects for completed priorities

**Status**: ‚úÖ Resolved
**Priority**: Medium
**Created**: 2025-10-20T16:43:45.652366
**Reporter**: user_listener
**Assigned**: code_developer
**Category**: logic

## Description

The orchestrator continuously spawns architects for US-105 and US-106, which are already marked as "‚úÖ Complete" in the ROADMAP.

Root Cause:
The ArchitectCoordinator.get_missing_specs() method doesn't filter out completed priorities before returning them as "missing specs". It only checks if a SPEC-*.md file exists, but doesn't check the priority status.

Impact:
- Wasted resources spawning architects that exit immediately
- Database pollution with duplicate spawn records
- Log noise from repeated architect spawning
- In last 5 minutes: 56 architects spawned (mostly duplicates)

Evidence from ROADMAP:
- PRIORITY 21: US-105 - Development Acceleration Insights Dashboard ‚úÖ Complete
- PRIORITY 22: US-106 - Code-Reviewer Agent for Quality Assurance ‚úÖ Complete

Yet orchestrator logs show:
2025-10-20 16:42:12 - üèóÔ∏è  Spawning architect for US-105 spec creation
2025-10-20 16:42:12 - üèóÔ∏è  Spawning architect for US-106 spec creation

Expected Behavior:
ArchitectCoordinator should filter out priorities with "Complete" status before returning missing specs.

Actual Behavior:
ArchitectCoordinator returns completed priorities as "missing specs" if no SPEC file exists.

## Reproduction Steps

1. Check ROADMAP status for US-105 and US-106: grep 'US-105\|US-106' docs/roadmap/ROADMAP.md
2. Observe both are marked '‚úÖ Complete'
3. Start orchestrator: poetry run orchestrator start
4. Monitor logs: tail -f /tmp/orchestrator.log
5. Observe architects repeatedly spawning for US-105 and US-106
6. Check database: sqlite3 data/orchestrator.db "SELECT COUNT(*) FROM agent_lifecycle WHERE task_id IN ('spec-105', 'spec-106') AND spawned_at > datetime('now', '-5 minutes')"

## Expected Behavior

_To be determined during analysis_

## Actual Behavior

_To be determined during analysis_

## Definition of Done

- [ ] Bug reproduced locally
- [ ] Root cause identified
- [ ] Technical specification written
- [ ] Fix implemented
- [ ] Regression tests added
- [ ] All tests passing
- [ ] No regressions in existing functionality
- [ ] Documentation updated if needed
- [ ] PR created and reviewed
- [ ] User validated fix

## Analysis (code_developer)

**Root Cause**: ROADMAP data inconsistency, NOT an ArchitectCoordinator bug.

The ROADMAP.md has TWO sections for each priority:
1. **Priority list** (lines ~276): Shows current status (e.g., "‚úÖ Complete")
2. **Detail sections** (lines ~30797+): Shows detailed info for each priority

For US-105 and US-106:
- Priority list correctly showed: "‚úÖ Complete"
- Detail sections incorrectly showed: "üìù Planned"

The RoadmapParser reads from **detail sections**, not the priority list. This caused the orchestrator to see these priorities as "Planned" when they were actually "Complete".

**Fix**: Updated ROADMAP.md detail sections (lines 30801 and 30985) to change status from "üìù Planned" to "‚úÖ Complete (2025-10-19)"

**Verification**: Tested with fresh orchestrator - now spawns only 1 architect (US-031) instead of 3 (US-031, US-105, US-106). Zero mentions of US-105/106 in logs.

## Technical Spec (code_developer)

_Phase 2: Technical Spec - To be filled by code_developer_

## Implementation (code_developer)

_Phase 3: Implementation - To be filled by code_developer_

## Testing Results (code_developer)

_Phase 4: Testing - To be filled by code_developer_

## Regression Test

**Test File**: _Path to test file (e.g., `tests/test_bug_069_architectcoordinator_spawns_ar.py`)_

**Test Name**: _Test function name (e.g., `test_bug_069_reproduction`)_

**Coverage**:
- [ ] Bug reproduction test added (fails before fix, passes after fix)
- [ ] Edge cases covered
- [ ] Test runs in CI/CD pipeline
- [ ] Test documentation added

**Notes**: _Additional testing notes, edge cases, or related tests_

## PR Link

_Phase 5: PR Creation - To be filled by code_developer_

---

**Workflow**: User ‚Üí project-manager ‚Üí code_developer ‚Üí Analysis ‚Üí Tech Spec ‚Üí Implementation ‚Üí Testing ‚Üí Regression Test ‚Üí PR ‚Üí Done
