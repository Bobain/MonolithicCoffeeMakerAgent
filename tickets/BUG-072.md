# BUG-072: Task-separator skill missing - parallel execution disabled

**Status**: ✅ Fixed
**Priority**: Medium
**Created**: 2025-10-20T17:33:58.195262
**Reporter**: User
**Assigned**: code_developer

## Description

Orchestrator cannot enable parallel execution because task-separator skill is missing.

Error message: 'Cannot parallelize: task-separator skill not found: /Users/bobain/PycharmProjects/MonolithicCoffeeMakerAgent/.claude/skills/architect/task-separator/task-separator.py'

This forces sequential execution of all tasks, reducing system efficiency and throughput.
The skill file either doesn't exist or is in the wrong location.

## Reproduction Steps

1. Start orchestrator with 'poetry run orchestrator start'
2. Wait for parallelization check
3. Observe warning: 'Cannot parallelize: task-separator skill not found'
4. System falls back to sequential execution

## Expected Behavior

_To be determined during analysis_

## Actual Behavior

_To be determined during analysis_

## Definition of Done

- [ ] Bug reproduced locally
- [ ] Root cause identified
- [ ] Technical specification written
- [ ] Fix implemented
- [ ] Regression tests added
- [ ] All tests passing
- [ ] No regressions in existing functionality
- [ ] Documentation updated if needed
- [ ] PR created and reviewed
- [ ] User validated fix

## Analysis (code_developer)

**Root Cause Identified** ✅

The bug occurs in `continuous_work_loop.py:978` - filename mismatch.

**Problem:**
- Code looks for: `task-separator.py` (hyphen)
- Actual file: `task_separator.py` (underscore)
- Path check at line 980 fails, skill not loaded

**Evidence:**
```bash
$ ls .claude/skills/architect/task-separator/
SKILL.md  __pycache__  task_separator.py  # ← underscore, not hyphen!
```

**Expected Behavior:**
- Skill file should be found and loaded
- Parallel execution should be enabled

**Actual Behavior:**
- File check fails: `skill_path.exists()` returns False
- Falls back to sequential execution
- Warning logged every polling cycle

## Technical Spec (code_developer)

**Fix Location:** `coffee_maker/orchestrator/continuous_work_loop.py:978`

**Solution:** Change filename from `task-separator.py` to `task_separator.py`

**One-Line Fix:**
```python
# Before:
skill_path = self.repo_root / ".claude" / "skills" / "architect" / "task-separator" / "task-separator.py"

# After:
skill_path = self.repo_root / ".claude" / "skills" / "architect" / "task-separator" / "task_separator.py"
```

**Impact:** Enables parallel execution for independent tasks

## Implementation (code_developer)

**Changes Made:** ✅

**File 1:** `coffee_maker/orchestrator/continuous_work_loop.py:978`
- Changed: `task-separator.py` → `task_separator.py`

**File 2:** `.claude/skills/architect/task-separator/task_separator.py`
- Fixed `_find_spec_file()` to handle both int and string priority IDs
- Fixed `_extract_file_impacts()` type hints
- Added logic to extract numeric part from "US-038" format

**File 3:** `coffee_maker/orchestrator/parallel_execution_coordinator.py:217` ✅ (2025-10-20)
- Changed: `task-separator.py` → `task_separator.py`
- Note: This location was missed in the initial fix

**File 4:** `coffee_maker/orchestrator/parallel_execution_coordinator.py:312` ✅ (2025-10-20)
- Fixed string formatting error: `f"feature/us-{priority_id:03d}"` → `f"feature/us-{priority_id}"`
- Issue: priority_id is already a string ("038"), cannot use integer format code `:03d`

**Root Causes Fixed:**
1. Filename mismatch (hyphen vs underscore) in TWO locations
2. Type handling bug (string priority IDs formatted as integers)
3. String format code mismatch in branch name generation

## Testing Results (code_developer)

_Phase 4: Testing - To be filled by code_developer_

## Regression Test

**Test File**: _Path to test file (e.g., `tests/test_bug_066_roadmap_parser.py`)_

**Test Name**: _Test function name (e.g., `test_roadmap_parser_supports_double_hash`)_

**Coverage**:
- [ ] Bug reproduction test added (fails before fix, passes after fix)
- [ ] Edge cases covered
- [ ] Test runs in CI/CD pipeline
- [ ] Test documentation added

**Notes**: _Additional testing notes, edge cases, or related tests_

## PR Link

_Phase 5: PR Creation - To be filled by code_developer_

---

**Workflow**: User → project-manager → code_developer → Analysis → Tech Spec → Implementation → Testing → Regression Test → PR → Done
