# US-030: Default `project-manager` to Chat Interface

**Status**: 📝 Planned
**Priority**: Low (UX improvement)
**Estimate**: 30 minutes

## User Story
As a **user**,
I want **`project-manager` (without any subcommand) to start the chat interface**,
So that **I can quickly access the most useful feature without typing extra commands**.

## Problem
Currently:
- Running `project-manager` alone shows help text
- User must type `project-manager chat` to start the chat
- Extra typing required for the most commonly used command
- Not intuitive - users expect the default behavior to be the primary feature

**Impact**:
- Slightly slower to start using the tool
- Less user-friendly for new users
- Help text is less useful than immediate chat access

## Proposed Solution
Change the default behavior when no subcommand is provided:

### Current Behavior
```bash
$ project-manager
# Shows help text with list of commands

# User must type:
$ project-manager chat
# To start chat
```

### New Behavior
```bash
$ project-manager
# Immediately starts chat interface (same as 'project-manager chat')

# Help still available via:
$ project-manager --help
$ project-manager -h
```

---

## Implementation

### File: `coffee_maker/cli/roadmap_cli.py`

**Current `main()` function**:
```python
def main() -> int:
    parser = argparse.ArgumentParser(...)
    subparsers = parser.add_subparsers(dest="command", help="Available commands")

    # ... add subcommands ...

    args = parser.parse_args()

    if not args.command:
        parser.print_help()  # Current behavior
        return 1

    # ... route to command handlers ...
```

**New `main()` function**:
```python
def main() -> int:
    parser = argparse.ArgumentParser(...)
    subparsers = parser.add_subparsers(dest="command", help="Available commands")

    # ... add subcommands ...

    args = parser.parse_args()

    # NEW: Default to 'chat' if no command provided
    if not args.command:
        logger.info("No command provided - defaulting to chat interface")
        # Create a namespace with chat command
        args.command = "chat"

    # ... route to command handlers ...
```

### Alternative Implementation (More Explicit)

```python
def main() -> int:
    # Check if no arguments provided
    import sys
    if len(sys.argv) == 1:  # Only 'project-manager' with no args
        # Default to chat
        sys.argv.append("chat")

    parser = argparse.ArgumentParser(...)
    # ... rest of implementation ...
```

---

## User Experience Impact

### Before
```bash
$ project-manager
Usage: project-manager [-h] {view,status,notifications,respond,sync,chat} ...

project-manager: error: the following arguments are required: command

# User thinks: "Oh, I need to read the help first..."
# User types: project-manager chat
```

### After
```bash
$ project-manager
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
ℹ️  Auto-detected: Using Claude CLI (default)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 TIP: Claude CLI is free with your subscription!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🤖 Coffee Maker Agent - AI Assistant (Phase 2)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Type your question or use commands like:
  /view      - View roadmap
  /add       - Add new priority
  /update    - Update priority status
  /analyze   - Analyze roadmap

Type 'exit' or 'quit' to leave, 'help' for more info.

You:
# User immediately starts working - much better UX!
```

---

## Acceptance Criteria

### Must Have
- [ ] Running `project-manager` without arguments starts chat interface
- [ ] `project-manager --help` still shows help text
- [ ] `project-manager -h` still shows help text
- [ ] All existing subcommands still work (`project-manager view`, `project-manager status`, etc.)
- [ ] No breaking changes to existing functionality

### Should Have
- [ ] Log message indicating default to chat (debug level)
- [ ] Optional message to user: "Starting chat interface (default)..."
- [ ] Update README.md with new default behavior

### Nice to Have
- [ ] Config option to change default command
- [ ] Environment variable to override default (e.g., `PM_DEFAULT_COMMAND=view`)

---

## Benefits

### For Users
- ✅ **Faster access** - No extra typing for most common task
- ✅ **Better UX** - Tool does what you expect by default
- ✅ **Easier onboarding** - New users immediately see the main feature

### For Power Users
- ✅ **No impact** - Explicit commands still work
- ✅ **Help accessible** - `--help` flag still available
- ✅ **Backward compatible** - All existing workflows unchanged

---

## Testing Plan

### Manual Testing
```bash
# Test 1: No arguments defaults to chat
$ project-manager
# Expected: Chat interface starts

# Test 2: Help flag works
$ project-manager --help
# Expected: Help text displayed

$ project-manager -h
# Expected: Help text displayed

# Test 3: Explicit commands still work
$ project-manager view
# Expected: Roadmap displayed

$ project-manager status
# Expected: Daemon status displayed

$ project-manager notifications
# Expected: Notifications listed

# Test 4: Chat command still works explicitly
$ project-manager chat
# Expected: Chat interface starts
```

### Edge Cases
- [ ] Test with invalid flags: `project-manager --invalid`
- [ ] Test with chat unavailable (missing dependencies)
- [ ] Test when ANTHROPIC_API_KEY not set
- [ ] Test when Claude CLI not installed

---

## Documentation Updates

### README.md
**Before**:
```markdown
## Usage

```bash
# Start interactive chat
poetry run project-manager chat

# View roadmap
poetry run project-manager view
```
```

**After**:
```markdown
## Usage

```bash
# Start interactive chat (default)
poetry run project-manager

# Or explicitly:
poetry run project-manager chat

# View roadmap
poetry run project-manager view

# Get help
poetry run project-manager --help
```
```

### Help Text Update
```python
parser = argparse.ArgumentParser(
    prog="project-manager",
    description="Coffee Maker Agent - Project Manager CLI with AI",
    epilog="""
Examples:
  # Start chat interface (default)
  project-manager

  # Or explicitly
  project-manager chat

  # View roadmap
  project-manager view

  # Get help
  project-manager --help

Note: Running 'project-manager' without arguments defaults to chat interface.
Use --help for full command list.
    """
)
```

---

## Implementation Checklist

- [ ] Modify `main()` function in `coffee_maker/cli/roadmap_cli.py`
- [ ] Add logic to default to `chat` when no command provided
- [ ] Ensure `--help` and `-h` still work
- [ ] Test all existing subcommands
- [ ] Update README.md with new default behavior
- [ ] Update help text epilog
- [ ] Test chat unavailable scenario (graceful error)
- [ ] Commit changes with clear message

---

## Alternative Approaches Considered

### Approach 1: Required Subcommand (Current)
```python
subparsers = parser.add_subparsers(dest="command", required=True)
```
**Pros**: Explicit, clear structure
**Cons**: Extra typing, less user-friendly

### Approach 2: Default to Chat (Proposed)
```python
if not args.command:
    args.command = "chat"
```
**Pros**: Fast, intuitive, best UX
**Cons**: Slightly less explicit

### Approach 3: Interactive Menu
```python
if not args.command:
    # Show interactive menu with numbered options
    print("1. Chat")
    print("2. View roadmap")
    # etc.
```
**Pros**: Discoverable, good for new users
**Cons**: Extra step, slower

**Decision**: Approach 2 (Default to Chat) - Best balance of UX and simplicity

---

## Related User Stories
- US-023: Settings Management (might want to configure default command)
- Phase 2 chat features (this makes chat more accessible)

---

## Success Metrics

After implementation:
- 90% of users use `project-manager` instead of `project-manager chat`
- Faster time-to-first-interaction for new users
- Zero complaints about changed behavior (backward compatible)
- Help text still easily accessible

---

🤖 **Created**: 2025-10-11 by user request
**Estimated Implementation Time**: 30 minutes
**Priority**: Low (UX improvement, not blocking)
**Impact**: High user satisfaction, minimal code change
